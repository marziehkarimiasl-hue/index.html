<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨Ø§Ø²ÛŒ Ø§Ø¹Ø´Ø§Ø± Ø´Ø´Ù…</title>

<style>
    body {
        font-family: sans-serif;
        background: linear-gradient(#a1d6ff, #fff);
        text-align: center;
        margin: 0;
    }

    .screen {
        display: none;
        padding: 20px;
    }

    #startScreen, #gameScreen, #winScreen, #gameOverScreen {
        height: 90vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    button {
        font-size: 28px;
        padding: 20px 40px;
        margin: 20px;
        background: #4caf50;
        color: white;
        border: none;
        border-radius: 18px;
        width: 70%;
        max-width: 300px;
        box-shadow: 0 6px 0 #357a38;
    }

    button:active {
        transform: translateY(4px);
        box-shadow: 0 2px 0 #357a38;
    }

    #question {
        font-size: 32px;
        font-weight: bold;
        margin: 20px;
    }

    #answerInput {
        font-size: 28px;
        padding: 15px;
        width: 80%;
        text-align: center;
        border-radius: 12px;
        border: 2px solid #333;
    }

    #timer, #score {
        font-size: 28px;
        margin: 10px;
    }

</style>
</head>
<body>

<!-- Ø§Ù…Ø¶Ø§ÛŒ Ù…Ø®ÙÛŒ -->
<!-- mka -->

<audio id="bgm" loop>
    <source src="https://files.catbox.moe/ujl6xj.mp3">
</audio>

<!-- ØµÙØ­Ù‡ Ø´Ø±ÙˆØ¹ -->
<div id="startScreen" class="screen" style="display:flex;">
    <h1 style="font-size:40px;">ğŸ® Ø¨Ø§Ø²ÛŒ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ Ø§Ø¹Ø´Ø§Ø±</h1>
    <p style="font-size:22px;">ØªØ¨Ø¯ÛŒÙ„ Ú©Ø³Ø± â†” Ø§Ø¹Ø´Ø§Ø± â€¢ Ø¬Ù…Ø¹ Ùˆ ØªÙØ±ÛŒÙ‚ Ø§Ø¹Ø´Ø§Ø±</p>
    <button onclick="startGame()">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
</div>

<!-- ØµÙØ­Ù‡ Ø¨Ø§Ø²ÛŒ -->
<div id="gameScreen" class="screen">
    <div id="timer">â³ Ø²Ù…Ø§Ù†: 30</div>
    <div id="score">â­ Ø§Ù…ØªÛŒØ§Ø²: 0</div>
    <div id="level">Ù…Ø±Ø­Ù„Ù‡: 1</div>

    <div id="question">...</div>

    <input id="answerInput" type="text" placeholder="Ø¬ÙˆØ§Ø¨ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†">

    <button onclick="submitAnswer()">Ø«Ø¨Øª Ø¬ÙˆØ§Ø¨</button>
</div>

<!-- ØµÙØ­Ù‡ Ù¾ÛŒØ±ÙˆØ²ÛŒ -->
<div id="winScreen" class="screen">
    <h1 style="font-size:42px;">ğŸ† Ø¢ÙØ±ÛŒÙ†! Ù…Ø±Ø­Ù„Ù‡ Ø±Ø§ Ø¨Ø±Ø¯ÛŒ</h1>
    <button onclick="nextLevel()">Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯</button>
</div>

<!-- ØµÙØ­Ù‡ Game Over -->
<div id="gameOverScreen" class="screen">
    <h1 style="font-size:42px; color:#e60000;">ğŸ’¥ Game Over</h1>
    <button onclick="restartGame()">Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡</button>
</div>

<script>

let level = 1;
let score = 0;
let timeLeft = 30;
let timerInterval;
let correctAnswer = "";

function $(id){ return document.getElementById(id); }

function show(screen){
    document.querySelectorAll(".screen").forEach(s => s.style.display = "none");
    $(screen).style.display = "flex";
}

function startGame(){
    $("bgm").play();
    score = 0;
    level = 1;
    startLevel();
}

function startLevel(){
    show("gameScreen");
    $("score").innerText = "â­ Ø§Ù…ØªÛŒØ§Ø²: " + score;
    $("level").innerText = "Ù…Ø±Ø­Ù„Ù‡: " + level;

    timeLeft = 30;
    $("timer").innerText = "â³ Ø²Ù…Ø§Ù†: " + timeLeft;

    clearInterval(timerInterval);
    timerInterval = setInterval(()=>{
        timeLeft--;
        $("timer").innerText = "â³ Ø²Ù…Ø§Ù†: " + timeLeft;
        if(timeLeft <= 0){
            clearInterval(timerInterval);
            show("gameOverScreen");
        }
    },1000);

    generateQuestion();
}

function generateQuestion(){
    let type = Math.ceil(Math.random() * 3);

    if(type === 1){
        // ØªØ¨Ø¯ÛŒÙ„ Ú©Ø³Ø± Ø¨Ù‡ Ø§Ø¹Ø´Ø§Ø±
        let a = Math.floor(Math.random()*9)+1;
        let b = [10,100][Math.floor(Math.random()*2)];
        correctAnswer = (a/b).toString();
        $("question").innerText = `ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†: ${a}/${b}`;
    }

    else if(type === 2){
        // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø´Ø§Ø± Ø¨Ù‡ Ú©Ø³Ø±
        let dec = (Math.floor(Math.random()*90)+10)/100;
        correctAnswer = dec;
        $("question").innerText = `Ø¨Ù‡ Ú©Ø³Ø± ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†: ${dec}`;
    }

    else {
        // Ø¬Ù…Ø¹ Ùˆ ØªÙØ±ÛŒÙ‚ Ø§Ø¹Ø´Ø§Ø±
        let x = (Math.floor(Math.random()*40)+10)/10;
        let y = (Math.floor(Math.random()*40)+10)/10;
        let op = ["+","-"][Math.floor(Math.random()*2)];

        correctAnswer = eval(`${x} ${op} ${y}`).toFixed(1);
        $("question").innerText = `${x} ${op} ${y}`;
    }
}

function submitAnswer(){
    let user = $("answerInput").value.trim();
    if(user === correctAnswer){
        score += 10;
        clearInterval(timerInterval);
        show("winScreen");
    } else {
        clearInterval(timerInterval);
        show("gameOverScreen");
    }
}

function nextLevel(){
    level++;
    startLevel();
}

function restartGame(){
    startGame();
}

</script>

</body>
</html>
