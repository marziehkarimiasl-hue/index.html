<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨Ø§Ø²ÛŒ Ø§Ø¹Ø´Ø§Ø± Ø´Ø´Ù…</title>

<style>
    body {
        font-family: sans-serif;
        background: linear-gradient(#ffe2bc, #fff);
        text-align: center;
        margin: 0;
    }

    .screen {
        display: none;
        padding: 20px;
    }

    #startScreen, #gameScreen, #winScreen, #gameOverScreen {
        height: 90vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    button {
        font-size: 28px;
        padding: 20px 40px;
        margin: 20px;
        background: #ff9800;
        color: white;
        border: none;
        border-radius: 18px;
        width: 70%;
        max-width: 330px;
        box-shadow: 0 6px 0 #c77700;
    }

    button:active {
        transform: translateY(4px);
        box-shadow: 0 2px 0 #c77700;
    }

    #question {
        font-size: 34px;
        font-weight: bold;
        margin: 20px;
        line-height: 1.7;
    }

    #answerInput {
        font-size: 28px;
        padding: 15px;
        width: 80%;
        text-align: center;
        border-radius: 12px;
        border: 2px solid #000;
    }

    #timer, #score {
        font-size: 28px;
        margin: 10px;
    }

    #hint {
        font-size: 20px;
        color: #444;
        margin-top: 10px;
    }

</style>
</head>
<body>

<!-- Ø§Ù…Ø¶Ø§ÛŒ Ù…Ø®ÙÛŒ -->
<!-- mka -->

<audio id="bgm" loop>
<source src="https://files.catbox.moe/ujl6xj.mp3">
</audio>

<!-- ØµÙØ­Ù‡ Ø´Ø±ÙˆØ¹ -->
<div id="startScreen" class="screen" style="display:flex;">
    <h1 style="font-size:40px;">ğŸ® Ø¨Ø§Ø²ÛŒ Ø§Ø¹Ø´Ø§Ø± Ø´Ø´Ù…</h1>
    <p style="font-size:22px;">Ù…Ù‚Ø§ÛŒØ³Ù‡ â€¢ Ø¬Ù…Ø¹ â€¢ ØªÙØ±ÛŒÙ‚</p>
    <button onclick="startGame()">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
</div>

<!-- ØµÙØ­Ù‡ Ø¨Ø§Ø²ÛŒ -->
<div id="gameScreen" class="screen">
    <div id="timer">â³ Ø²Ù…Ø§Ù†: 30</div>
    <div id="score">â­ Ø§Ù…ØªÛŒØ§Ø²: 0</div>
    <div id="level">Ù…Ø±Ø­Ù„Ù‡: 1</div>

    <div id="question">...</div>

    <input id="answerInput" type="text" placeholder="Ø¬ÙˆØ§Ø¨ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³">

    <p id="hint">Ù…Ø«Ø§Ù„ Ù…Ù‚Ø§ÛŒØ³Ù‡: Ø¨Ø²Ø±Ú¯ØªØ± â†’ > ØŒ Ú©ÙˆÚ†Ú©ØªØ± â†’ <</p>

    <button onclick="submitAnswer()">Ø«Ø¨Øª Ø¬ÙˆØ§Ø¨</button>
</div>

<!-- Ù¾ÛŒØ±ÙˆØ²ÛŒ -->
<div id="winScreen" class="screen">
    <h1 style="font-size:42px;">ğŸ† Ø¢ÙØ±ÛŒÙ†! Ù…Ø±Ø­Ù„Ù‡ Ø±Ùˆ Ø¨Ø±Ø¯ÛŒ</h1>
    <button onclick="nextLevel()">Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯</button>
</div>

<!-- Ú¯ÛŒÙ…â€ŒØ§ÙˆØ± -->
<div id="gameOverScreen" class="screen">
    <h1 style="font-size:42px; color:#e60000;">ğŸ’¥ Game Over</h1>
    <button onclick="restartGame()">Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡</button>
</div>

<script>

let level = 1;
let score = 0;
let timeLeft = 30;
let timerInterval;
let correctAnswer = "";

function $(id){ return document.getElementById(id); }

function show(screen){
    document.querySelectorAll(".screen").forEach(s => s.style.display = "none");
    $(screen).style.display = "flex";
}

function startGame(){
    $("bgm").play();
    score = 0;
    level = 1;
    startLevel();
}

function startLevel(){
    show("gameScreen");
    $("score").innerText = "â­ Ø§Ù…ØªÛŒØ§Ø²: " + score;
    $("level").innerText = "Ù…Ø±Ø­Ù„Ù‡: " + level;

    timeLeft = 30;
    $("timer").innerText = "â³ Ø²Ù…Ø§Ù†: " + timeLeft;

    clearInterval(timerInterval);
    timerInterval = setInterval(()=>{
        timeLeft--;
        $("timer").innerText = "â³ Ø²Ù…Ø§Ù†: " + timeLeft;
        if(timeLeft <= 0){
            clearInterval(timerInterval);
            show("gameOverScreen");
        }
    },1000);

    generateQuestion();
}

// ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø´Ø§Ø± Ø§Ø² 2/5 Ø¨Ù‡ 0.5
function slashToDecimal(str){
    return Number(str.replace("/", "."));
}

function generateQuestion(){
    let type = Math.ceil(Math.random() * 3);

    if(type === 1){
        generateComparison();
    }
    else if(type === 2){
        generateAddition();
    }
    else {
        generateSubtraction();
    }
}


// ----------------------
// Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ø¹Ø´Ø§Ø±ÛŒ
// ----------------------
function generateComparison(){
    let a = (Math.floor(Math.random()*90)+10)/10;
    let b = (Math.floor(Math.random()*90)+10)/10;

    let showA = String(a).replace(".", "/");
    let showB = String(b).replace(".", "/");

    $("question").innerText = `Ú©Ø¯Ø§Ù… Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ  
    ${showA}  ?  ${showB}`;

    correctAnswer = a > b ? ">" : "<";
}


// ----------------------
// Ø¬Ù…Ø¹ Ø§Ø¹Ø´Ø§Ø±ÛŒ
// ----------------------
function generateAddition(){
    let a = (Math.floor(Math.random()*50)+10)/10;
    let b = (Math.floor(Math.random()*50)+10)/10;

    let showA = String(a).replace(".", "/");
    let showB = String(b).replace(".", "/");

    $("question").innerText = `${showA} + ${showB}`;

    correctAnswer = (a + b).toFixed(1).replace(".", "/");
}


// ----------------------
// ØªÙØ±ÛŒÙ‚ Ø¨Ø¯ÙˆÙ† Ø¬ÙˆØ§Ø¨ Ù…Ù†ÙÛŒ
// ----------------------
function generateSubtraction(){
    let x = (Math.floor(Math.random()*50)+10)/10;
    let y = (Math.floor(Math.random()*50)+10)/10;

    let a = Math.max(x,y);
    let b = Math.min(x,y);

    let showA = String(a).replace(".", "/");
    let showB = String(b).replace(".", "/");

    $("question").innerText = `${showA} - ${showB}`;

    correctAnswer = (a - b).toFixed(1).replace(".", "/");
}

function submitAnswer(){
    let user = $("answerInput").value.trim();

    if(user === correctAnswer){
        score += 10;
        clearInterval(timerInterval);
        show("winScreen");
    } else {
        clearInterval(timerInterval);
        show("gameOverScreen");
    }
}

function nextLevel(){
    level++;
    startLevel();
}

function restartGame(){
    startGame();
}

</script>

</body>
</html>
